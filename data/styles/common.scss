$bg_color: if($variant == 'light', #f6f5f4, darken(desaturate(#3d3846, 100%), 4%));
$selected_fg_color: #ffffff;
$selected_bg_color: if($variant == 'light', #e01b24, #c01c28);
$selected_borders_color: if($variant == 'light', darken($selected_bg_color, 15%), darken($selected_bg_color, 30%));
$borders_color: if($variant == 'light', darken($bg_color, 18%), darken($bg_color, 10%));
$link_color: if($variant == 'light', darken($selected_bg_color, 10%), lighten($selected_bg_color, 20%));
$link_visited_color: if($variant == 'light', darken($selected_bg_color, 20%), lighten($selected_bg_color, 10%));
$checkradio_bg_color: if($variant == 'light', $selected_bg_color, lighten($selected_bg_color, 10%));
$checkradio_borders_color: if($variant == 'light', darken($checkradio_bg_color, 20%), darken($checkradio_bg_color, 40%));
$backdrop_borders_color: mix($borders_color, $bg_color, 80%);

headerbar {
    border-bottom: 2px solid $selected_bg_color;

    &:backdrop {
        border-width: 0 0 1px;
        border-style: solid;
        border-color: $backdrop_borders_color;
    }

    window.devel &.titlebar:not(.selection-mode) {
        $c: darken($bg_color, 10%);
        $gradient: cross-fade(10% -gtk-icontheme("system-run-symbolic"), image(transparent)) 90% 0/256px 256px no-repeat,
                   linear-gradient(to right, transparent 65%, transparentize($selected_bg_color, 0.8)),
                   linear-gradient(to top, darken($c, 3%), $c 3px, lighten($c, 6%));
        @if $variant == 'dark' {
            $gradient: cross-fade(10% -gtk-icontheme("system-run-symbolic"), image(transparent)) 90% 0/256px 256px no-repeat,
                       linear-gradient(to right, transparent 65%, transparentize($selected_bg_color, 0.9)),
                       linear-gradient(to top, lighten($c, 3%) 3px, lighten($c, 5%));
        }

        background: $bg_color $gradient;

        &:backdrop {
            background: $bg_color cross-fade(10% -gtk-icontheme("system-run-symbolic"), image(transparent)) 90% 0/256px 256px no-repeat,
                        image($bg_color);
        }
    }
}

switch:checked {
    border-color: $checkradio_borders_color;
    background-color: $checkradio_bg_color;
    text-shadow: 0 1px transparentize($selected_borders_color, 0.5),
                 0 0 2px transparentize(white, 0.4);
}

entry:focus {
    border-color: if($variant == 'light', $selected_bg_color, $selected_borders_color);
    box-shadow: inset 0 0 0 1px $selected_bg_color;
}

menu menuitem:hover,
.menu menuitem:hover,
.context-menu menuitem:hover {
    background-color: $selected_bg_color;
}

check:checked {
    background-image: linear-gradient(to bottom, lighten($checkradio_bg_color, 5%) 20%, $checkradio_bg_color 90%);
    border-color: $checkradio_bg_color;
}

label {
    selection {
        background-color: $selected_bg_color;
    }
}

*:link {
    color: $link_color;

    &:visited {
        color: $link_visited_color;

        *:selected & {
            color: mix($selected_fg_color, $link_visited_color, 60%);
        }
    }

    &:hover {
        $_fg: lighten($link_color, 10%);
        color: $_fg;

        *:selected & {
            color: mix($selected_fg_color, $_fg, 90%);
        }
    }

    &:active {
        color: $link_color;

        *:selected & {
            color: mix($selected_fg_color, $link_color, 80%);
        }
    }

    &:disabled,
    &:disabled:backdrop {
        color: transparentize(desaturate($link_color, 100%), 0.2);
    }

    &:backdrop,
    &:backdrop:hover,
    &:backdrop:hover:selected {
        color: transparentize($link_color, 0.1);
    }

    &:selected,
    *:selected & {
        color: mix($selected_fg_color, $link_color, 80%);
    }
}
