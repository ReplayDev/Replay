<?xml version="1.0" encoding="UTF-8"?>
<interface>

<template class="RpyHeaderBar" parent="GtkWidget">

	<property name="layout-manager">
		<object class="GtkBoxLayout">
			<property name="orientation">vertical</property>
		</object>
	</property>

	<child>
		<object class="AdwHeaderBar" id="header-bar">

			<binding name="show-end-title-buttons">
				<lookup name="show-end-title-buttons">RpyHeaderBar</lookup>
			</binding>

			<binding name="show-start-title-buttons">
				<lookup name="show-start-title-buttons">RpyHeaderBar</lookup>
			</binding>

			<property name="title-widget">
				<object class="AdwWindowTitle">

					<binding name="subtitle">
						<lookup name="subtitle">RpyHeaderBar</lookup>
					</binding>

					<binding name="title">
						<lookup name="title">RpyHeaderBar</lookup>
					</binding>

				</object>
			</property>

			<style>
				<class name="titlebar" />
			</style>

			<child type="start">
				<object class="GtkRevealer" id="back-button-revealer">
					<property name="transition-type">slide-right</property>
					<signal name="notify::child-revealed" handler="update-back-button-visibility" />

					<binding name="reveal-child">
						<lookup name="show-back-button">RpyHeaderBar</lookup>
					</binding>

					<property name="child">
						<object class="GtkButton">
							<property name="icon-name">go-previous-symbolic</property>
						</object>
					</property>

				</object>
			</child>

			<child type="start">
				<object class="GtkRevealer">
					<property name="transition-type">slide-right</property>

					<binding name="reveal-child">
						<lookup name="show-search-button">RpyHeaderBar</lookup>
					</binding>

					<property name="child">
						<object class="GtkToggleButton">
							<property name="icon-name">edit-find-symbolic</property>
							<property name="active" bind-property="search-mode" bind-source="RpyHeaderBar"
							          bind-flags="bidirectional|sync-create" />
						</object>
					</property>

				</object>
			</child>

			<child type="end">
				<object class="GtkRevealer">
					<property name="transition-type">slide-left</property>

					<binding name="reveal-child">
						<lookup name="show-menu-button">RpyHeaderBar</lookup>
					</binding>

					<property name="child">
						<object class="GtkMenuButton">
							<property name="icon-name">open-menu-symbolic</property>
							<property name="menu-model">primary-menu</property>
						</object>
					</property>

				</object>
			</child>

		</object>
	</child>

	<child>
		<object class="GtkSearchBar" id="search-bar">
			<property name="search-mode-enabled" bind-property="search-mode" bind-source="RpyHeaderBar"
			          bind-flags="bidirectional|sync-create" />

			<binding name="key-capture-widget">
				<lookup name="key-capture-widget">RpyHeaderBar</lookup>
			</binding>

			<property name="child">
				<object class="GtkSearchEntry" id="search-entry">
					<property name="hexpand">yes</property>
					<!-- TRANSLATORS: This is the placeholder of the search entry in the main window of the app -->
					<property name="placeholder-text" translatable="yes">Search</property>
				</object>
			</property>

		</object>
	</child>

</template>

<menu id="primary-menu">

	<item>
		<!-- TRANSLATORS: This is the label of the primary menu item that will show the preferences -->
		<attribute name="label" translatable="yes">_Preferences</attribute>
		<attribute name="action">win.show-preferences</attribute>
	</item>

	<item>
		<!-- TRANSLATORS: This is the label of the primary menu item that will display the keyboard shortcuts -->
		<attribute name="label" translatable="yes">_Keyboard Shortcuts</attribute>
		<attribute name="action">win.show-help-overlay</attribute>
	</item>

	<item>
		<!-- TRANSLATORS: This is the label of the primary menu item that will display the about the app -->
		<attribute name="label" translatable="yes">_About Replay</attribute>
		<attribute name="action">win.show-about</attribute>
	</item>

</menu>

</interface>
